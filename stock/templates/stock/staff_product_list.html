{% include 'base.html' %}
{% load static %}

{% block content %}
<div class="container-fluid mt-4">
    <div class="row justify-content-center">
        <div class="col-auto">
            <h3>Staff Product List</h3>
            <table class="table table-hover border mt-3">

                <thead class="thead-dark">
                    <tr>
                        <th scope="col">Product</th>
                        <th scope="col">Category</th>
                        <th scope="col" onclick="onColHeaderClick(event, 'price')">Price</th>
                        <th scope="col">Stock</th>
                        <th scope="col">Threshold</th>
                        <th scope="col" onclick="onColHeaderClick(event, 'stock-low')">Stock Low</th>
                        <th scope="col" onclick="onColHeaderClick(event, 'on-special')">Special Offer</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in products %}
                    <tr onclick="onRowClick(event, '{{ item.id }}')">
                        <td>{{ item.name }}</td>
                        <td>{{ item.category }}</td>
                        <td class="text-right">&euro;{{ item.price }}</td>
                        <td class="text-center">{{ item.stock }}</td>
                        <td class="text-center">{{ item.threshold }}</td>
                        <td class="text-center {% if item.stock_low %}stock-low-badge{% endif %}">
                            {% if item.stock_low %}LOW{% endif %}
                        </td>
                        <td class="text-center {% if item.on_special %}special-offer-badge{% endif %}">
                            {% if item.on_special %}ON OFFER{% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}

{% block postloadjs %}
<script>
    const onRowClick = (event, id) => {
        window.location = `/stock/update_product/${id}`;
    }
    const onColHeaderClick = (event, name) => {
        window.location = `/stock/staff_product_list/${name}`;
    }
</script>
{% endblock %}