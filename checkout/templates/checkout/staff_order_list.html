{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container-fluid">
    <div class="row mt-3 text-center justify-content-center">
        <div class="col-auto">
            <h3>Staff Product List</h3>
            <span>Click item to see detail.</span>
            <table class="table table-hover border mt-3">
                <thead class="thead-dark">
                    <tr>
                        <th scope="col" onclick="">
                            Order No.
                        </th>
                        <th scope="col">
                            Paid
                        </th>
                        <th scope="col">
                            Fulfilled
                        </th>
                        <th scope="col" onclick="">
                            Name
                        </th>
                        <th scope="col" onclick="">
                            Email
                        </th>
                        <th scope="col" onclick="">
                            Country
                        </th>
                        <th scope="col" onclick="">
                            Date
                        </th>
                        <th scope="col">
                            Total
                        </th>
                        
                    </tr>
                </thead>
                <tbody>
                    {% for order in orders %}
                    <tr onclick="onRowClick(event, '{{ order.id }}')"
                        class="{% if order.fulfilled or not order.payment_confirmed %}text-muted bg-light-grey{% endif %}">
                        <td>
                            {{ order.order_number }}
                        </td>
                        <td>
                            {% if order.payment_confirmed %}
                            &#x2705;
                            {% else %}
                            &#x274C;
                            {% endif %}
                        </td>
                        <td>
                            {% if order.fulfilled %}
                            &#x2705;
                            {% else %}
                            &#x274C;
                            {% endif %}
                        </td>
                        <td>
                            {{ order.full_name }}
                        </td>
                        <td>
                            {{ order.email }}
                        </td>
                        <td>
                            {{ order.country }}
                        </td>
                        <td>
                            {{ order.date }}
                        </td>
                        <td>
                            &euro;{{ order.grand_total }}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}

{% block postloadjs %}
<script>
    const onRowClick = (event, id) => {
        window.location = `/checkout/staff_order_detail/${id}`;
    }
</script>
{% endblock %}